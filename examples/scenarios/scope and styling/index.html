<link rel="import" href="/components/bower_components/polymer/polymer.html">

<style is="custom-style">
  ::shadow p.customized { color: green !important; }

  :root {
    --p-color: white;
  }
</style>

<dom-module id="x-extra">
  <template>
    <style>
      p {
        /* if you write
         * color: red;
         * the global is="custom-style" block will apply the p.customized properly
         * but if you write the following, it won't work anymore.
         * Just type in "!important" or overwrite in the current style tag.
         * This is because the Polymer styling system will define more targetted
         * styling rules and then will override the .customized target of the global styling.
         */
        color: var(--p-color);
      }
    </style>
    
    <p>another paragraph</p>
    <p class="customized">end</p>
    
  </template>

  <script>
    Polymer({
      is: 'x-extra',

      attached: function () {
        this.customStyle['--p-color'] = 'blue';
        this.updateStyles();
      }
    });
  </script>
</dom-module>

<dom-module id="x-test">
  <template>
    <style>
      p {
        color: var(--p-color);
      }
    </style>

    <p>one paragraph</p>
    
    <x-extra></x-extra>
  </template>
  <script>
    Polymer({
      is: 'x-test',

      attached: function () {
        /**
         * "--p-color" is defined globally (see is="custom-style" block above)
         * However you can change the value of this custom style in every scope
         * using it.
         * Therefore the following code will change the value of "--p-color"
         * in this scope and also all subsequent scopes using it.
         */
        this.customStyle['--p-color'] = 'red';
        this.updateStyles();

        /**
         * see 'x-extra' element above, 'x-extra' is also using "--p-color"
         * we also redefined "--p-color" of 'x-extra' to demonstrate the
         * existence of a scoped custom styling system.
         */
      }
    });
  </script>
</dom-module>

<x-test></x-test>
